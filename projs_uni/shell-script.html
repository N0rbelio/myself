<!DOCTYPE html>
<html lang="pt-PT">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>Andr√© Oliveira Page</title>

        <!-- import styles -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
        <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>


        <!-- styles -->
        <link rel="stylesheet" href="../styles/main_style.css">
        <link rel="stylesheet" href="../styles/images.css">
        <link rel="stylesheet" href="../styles/root.css">
        <link rel="stylesheet" href="../styles/nav.css">

        
        <!-- Highlight.js JavaScript -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script>
        
        
    </head>

    <body> 
            <body>
        <nav aria-label="Main navigation">
            <button class="hamburger" aria-label="Toggle menu" aria-controls="menu" aria-expanded="false">
                <span class="line-1"></span>
                <span class="line-2"></span>
                <span class="line-3"></span>
            </button>

            <ul class="nav-links" id="menu">
                <li><a href="../index.html">Home</a></li>
                <li class="has-submenu">
                    <a href="#" aria-expanded="false">Projetos Universidade</a>
                    <ul class="submenu">
                        <li><a href="projs_uni/pirsi.html">PIRSI</a></li>
                        <li><a href="projs_uni/ipma_proj.html">IPMA API</a></li>
                        <li><a href="projs_uni/shell-script.html">Shell Script</a></li>
                    </ul>
                </li>

                <li class="has-submenu">
                    <a href="#" aria-expanded="false">Projetos Pessoais</a>
                    <ul class="submenu">
                        <li><a href="projs_pessoal/script.html">Scripts</a></li>
                        <li><a href="projs_pessoal/homelab.html">HomeLab</a></li>
                        <li><a href="projs_pessoal/diy-router.html">DIY Router</a></li>
                    </ul>
                </li>

                <li class="has-submenu">
                    <a href="#" aria-expanded="false">Projetos Trabalho</a>
                    <ul class="submenu">
                        <li><a href="projs_trabalho/script-activex.html">Script ActiveX</a></li>
                        <li><a href="projs_trabalho/assinatura-email.html">Assinaturas de Email</a></li>
                    </ul>
                </li>
            </ul>

            <div class="language">
                <select id="lang-select">
                    <option value="en">üá∫üá∏ English</option>
                    <option value="pt" selected>üáµüáπ Portugu√™s</option>
                </select>
            </div>
        </nav>
        <div class="container">        

            <div class="text">

                <pre>
                    <code class="language-bash">

                        #!/bin/bash
                        root_folder=$(dirname "$5") #guarda a raiz da pasta
                        filename=.protecao #define a localiza√ßao dos ficheiros
                        filename2=.protecao2 #define a localiza√ßao dos ficheiros

                        ####################################################################################################
                        #
                        #     correr o file no caso -p sendo /home/(user)/Desktop/(folder)
                        #     guardar em outra folder -p sendo /home/(user)/Desktop/(folder) /home/root/save_folder/
                        #     correr o file no caso -v .protecao .portecao2
                        #
                        ####################################################################################################


                        if [ $# -eq 0 ]
                        then
                                echo "Invalid switch $1
                                Uso: ./vigia_pirata.sh [{-p <diretoria[<diretoria>] | -c}] [-f <ficheiro>]
                                    $(tput setaf 2)-p $(tput setaf 1): $(tput setaf 7)Protege e guarda informa√ß√£o acerca de uma ou mais diretorias
                                    $(tput setaf 3)-v $(tput setaf 1): $(tput setaf 7)Verifica altera√ß√µes em ficheiros desde que foram protegidos
                                    $(tput setaf 6)-f $(tput setaf 1): $(tput setaf 7)Indica√ß√£o do nome do ficheiro onde a base de dados ser√° guardada

                                    (Por defeito ser√° /home/n0rbelio/Desktop/proj_SO/.protecao)

                                    "
                        fi

                        #menu de incializa√ß√£o
                        if [ $# -eq 1 ]
                        then
                            echo "Invalid switch $1
                                Uso: ./vigia_pirata.sh [{-p <diretoria[<diretoria>] | -c}] [-f <ficheiro>]
                                    $(tput setaf 2)-p $(tput setaf 1): $(tput setaf 7)Protege e guarda informa√ß√£o acerca de uma ou mais diretorias
                                    $(tput setaf 3)-v $(tput setaf 1): $(tput setaf 7)Verifica altera√ß√µes em ficheiros desde que foram protegidos
                                    $(tput setaf 6)-f $(tput setaf 1): $(tput setaf 7)Indica√ß√£o do nome do ficheiro onde a base de dados ser√° guardada

                                    (Por defeito ser√° /home/n0rbelio/Desktop/proj_SO/.protecao)

                                    "
                        exit 2



                        else
                            while getopts "p:v:f" OPTION #vai obter a op√£o escolhida
                            do
                            case $OPTION in # qual seja a op√ßao escolhida pelo utilizaodr vai ser processada aqui

                                p)
                                    if [ -d $3 ];
                                    then
                                        touch $3/.protecao
                                        ls $2 -lr -A > $2.protecao #define que a pasta predefenida ser√° esta
                                        echo ""
                                        echo " $(tput setaf 2)‚â° $(tput setaf 7)Base de dados de prote√ß√£o $3/.protecao criada"
                                        echo ""
                                        exit 0
                                        elif [ -n $3 ]; #caso o utilizador tenha escolhido uma localiza√ßao vai ser criada aqui
                                    then
                                        touch $4.protecao #cria o ficheiro protecao onde vai ter toda a descri√ßao dos fichieros e pastas no diretorio escolhido
                                        ls $2 -lr -A > $4
                                        echo ""
                                        echo " $(tput setaf 2)‚â° $(tput setaf 7)Base de dados de prote√ß√£o$4 criada"
                                        echo ""
                                    else
                                        echo ""
                                        echo " $(tput setaf 1)√ó $(tput setaf 7)Erro em criar a base de dados"
                                        echo ""
                                    fi
                                    ;;


                                v)
                                if [ -e "$file2" ]; #vai verificar se o ficheiro 2 existe se sim
                                    then
                                        diff -y .protecao .protecao2 #vai comparar a protecao com a prote√ßao 2
                                        echo ""
                                        echo "$(tput setaf 2) ‚â° $(tput bold)Made by $(tput setaf 7)$(tput blink)Andre"$(tput sgr0)
                                        echo ""
                                        tar -czvf vigia_recurso $root_folder |sha256sum > .protegido.sha #vai fazer um checksum do zip vai gerar um value de 256 bits e vai ver se algum file dentro do zip foi alterado
                                        cp .protecao .protecao2 #vai copiar tudo o que tiver dentro da prote√ßao e enviar para a prote√ßao 2
                                    else
                                        echo ""
                                        echo " $(tput setaf 1)√ó $(tput setaf 7)N√£o tenho ficheiro para comparar"
                                        echo ""
                                        touch .protecao2 #vai criar o filheiro prote√ßao 2
                                        cp .protecao .protecao2 #vai copiar tudo o que tiver dentro da prote√ßao e enviar para a prote√ßao 2
                                        echo ""
                                        echo "$(tput setaf 1)PORFAVOR! $(tput setaf 7)corre o $(tput setaf 4)-p $(tput setaf 7)de novo para procurar atualiz√ß√µes no diretorio."
                                        echo "$(tput setaf 2):D $(tput setaf 7)Obrigado, Bom fim de semana!"
                                        echo ""
                                fi
                                ;;

                                ?)
                                    exit 0
                                ;;
                            esac
                            done
                        fi
                    </code>
                </pre>

            </div>        
            
        </div>

        <script src="../age_calc.js"></script>
        <script src="../nav_menus.js"></script>
    </body>
</html>
